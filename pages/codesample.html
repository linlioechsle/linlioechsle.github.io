<!DOCTYPE html>
<html>
  <head>
    <title>Cover Letter</title>
    <link rel="stylesheet" type="text/css" href="/css/main.css">
    <link rel="stylesheet" type="text/css" href="/css/main.css">
  </head>
  <body>
    <h1>Lin Li Oechsle</h1>
    <nav>
      <ul>
        <li><a href="/">home</a></li>
        <li><a href="/pages/reel.html">reel</a></li>
      </ul>
    <nav>
    
    package cheatershangman;

import java.io.FileNotFoundException;
import java.util.Scanner;
import java.io.File;
import java.util.HashMap;
import java.util.Map;
import java.util.List;
import java.util.ArrayList;
import java.util.Set;
import java.util.HashSet;


public class CheatersHangman {
    public static Map<String, List<String>> getWordFamilies(List<String> wordList, Set<Character> guessedLetters) {
        Map<String, List<String>> wordFamilies = new HashMap<>();
        for (String word: wordList) {
            String family = "";
            for (char c: word.toCharArray()) {
                if(guessedLetters.contains(c)) {
                    family += c;
                }
                else {
                    family += " _ ";
                }
            }
            if(!wordFamilies.containsKey(family)) {
                List<String> l = new ArrayList<>();
                l.add(word);
                wordFamilies.put(family, l);
            }
            else {
                List<String> l = wordFamilies.get(family);
                l.add(word);
                wordFamilies.put(family, l);
            }

        }


        return wordFamilies;
    }
    public static String getBestFamily(Map<String,List<String>> wordFamilies) {
        List<String> bestFamilyList = new ArrayList<>();
        String bestFamily = "";
        Set<String> keys = wordFamilies.keySet();
        
        for(String family : keys) {
            if(wordFamilies.get(family).size() == bestFamilyList.size()) {
                continue;
            }
            else if(wordFamilies.get(family).size() > bestFamilyList.size()){
                 bestFamilyList = wordFamilies.get(family);
                 bestFamily = family;
            }
        }
        return bestFamily;
    }

    public static List<String> askForSize(Map<Integer, List<String>> wordLists) {
        Scanner kb = new Scanner(System.in);
        boolean validSize = false;
        while(!validSize) {
            System.out.println("What size word would you like to guess? ");
            int size = Integer.parseInt(kb.nextLine());
            if(wordLists.containsKey(size)) {
                return wordLists.get(size);
            } else{
                System.out.println("No words of that size. Please choose a different size.");
            }
        }
        return null;
    }

    public static boolean rightOrWrong(String output, String bestFamily, char guess) {
        if(output.equals(bestFamily)) {
            System.out.println("Sorry, " + guess + " is not in the word we're thinking of.");
            return false;
        }
        else {
            System.out.println("Correct! Our word contains " + guess);
            return true;
        }
    }

    public static void main(String[] args) {
        Map<Integer, List<String>> wordLists = new HashMap<>();

        try {
            Scanner scanner = new Scanner(new File("words.txt"));
            while(scanner.hasNextLine()){
                String word = scanner.nextLine();
                word = word.toLowerCase();
                if(!wordLists.containsKey(word.length())) {
                    List<String> l = new ArrayList<>();
                    l.add(word);
                    wordLists.put(word.length(), l);
                }
                else {
                    List<String> l = wordLists.get(word.length());
                    l.add(word);
                    wordLists.put(word.length(), l);
                }

            }
            scanner.close();
        }

        catch (FileNotFoundException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        }

        List<String> wordList = askForSize(wordLists);
        Scanner kb = new Scanner(System.in);
        System.out.println("How many wrong guesses would you like? ");
        int numGuesses = Integer.parseInt(kb.nextLine());
        String output = "";
        int wordSize = wordList.get(0).length();
        for (int i = 0; i < wordSize; i++) {
            output += " _ ";
        }
 
        boolean gameIsWon = false;
        Set<Character> guessedLetters = new HashSet<>();

        while(!gameIsWon && numGuesses > 0) {
            System.out.println(output + "\n");
            boolean validGuess = false;
            char guess = 0;
            while(!validGuess) {
                System.out.println("Guessed letters: " + guessedLetters);
                System.out.println("Enter a letter that has not already been guessed: ");
                guess = kb.nextLine().charAt(0);
                guess = Character.toLowerCase(guess);
                if(!guessedLetters.contains(guess)) {
                    if(guess >= 97 && guess <= 122)  {
                        guessedLetters.add(guess);
                        validGuess = true;
                    }
                    else {
                        System.out.println("Invalid guess. Please guess a letter. ");
                    }
                }
                else {
                    System.out.println(guess + " has already been guessed. Please guess another letter. ");
                }
            }

            Map<String, List<String>> wordFamilies = getWordFamilies(wordList, guessedLetters);
            String bestFamily = getBestFamily(wordFamilies);
            boolean rightOrWrong = rightOrWrong(output, bestFamily, guess);
            if(!rightOrWrong) {
                numGuesses--;
            }
            output = bestFamily;
            wordList = wordFamilies.get(bestFamily);
            
            for(int i = 0; i < output.length(); i++) {
            	if (output.charAt(i) == '_') {
            		gameIsWon = false;
            		break;
            	} else {
            		gameIsWon = true;
            	}
            }

        }
        if(gameIsWon) {
        	System.out.println("\nCongratulations! You correctly guessed: " + output + "!" );
        	System.out.println("You had " + numGuesses + " guesses left");
        } else {
        	System.out.println("Sorry, you lost. The word you were trying to guess was: " + wordList.get(0) + ".");
        }
    }
}
    
    

  </body>
</html>
